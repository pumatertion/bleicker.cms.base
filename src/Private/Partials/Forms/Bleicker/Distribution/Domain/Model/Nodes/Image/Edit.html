<fluid xmlns:cms="Bleicker\Cms\ViewHelpers">
	<f:alias map="{systemLocale:'{cms:translation.systemLocale()}'}">
		<form class="form" action="/{systemLocale}/nodemanager/update/{node.id}" method="post" enctype="multipart/form-data">
			<fieldset>
				<legend>Update image properties</legend>
				<cms:validation.validationResults results="{validationException.results}" propertyPath="title">
					<f:if condition="{validationResults->f:count()}">
						<f:then>
							<div class="form-group has-error">
								<f:for each="{validationResults}" as="validationResult" iteration="iteration">
									<f:if condition="{0:iteration.cycle}=={0:1}">
										<label for="title">Title</label>
										<input class="form-control" type="text" id="title" name="title" value="{validationResult.source->f:format.htmlspecialchars()}"
											   placeholder="Please give the image a title"/>
									</f:if>
									<label class="validation-property-error" for="title">{validationResult}</label>
								</f:for>
							</div>
						</f:then>
						<f:else>
							<div class="form-group">
								<label for="title">Title</label>
								<input class="form-control" type="text" id="title" name="title" value="{node->cms:node.translate(propertyName:'title')->f:format.htmlspecialchars()}"
									   placeholder="Please give the image a title"/>
							</div>
						</f:else>
					</f:if>
				</cms:validation.validationResults>
				<cms:validation.validationResults results="{validationException.results}" propertyPath="alt">
					<f:if condition="{validationResults->f:count()}">
						<f:then>
							<div class="form-group has-error">
								<f:for each="{validationResults}" as="validationResult" iteration="iteration">
									<f:if condition="{0:iteration.cycle}=={0:1}">
										<label for="title">Alt</label>
										<input class="form-control" type="text" id="alt" name="alt" value="{validationResult.source->f:format.htmlspecialchars()}"
											   placeholder="Please give the image an alternative text"/>
									</f:if>
									<label class="validation-property-error" for="alt">{validationResult}</label>
								</f:for>
							</div>
						</f:then>
						<f:else>
							<div class="form-group">
								<label for="title">Alt</label>
								<input class="form-control" type="text" id="alt" name="alt" value="{node->cms:node.translate(propertyName:'alt')->f:format.htmlspecialchars()}"
									   placeholder="Please give the image an alternative text"/>
							</div>
						</f:else>
					</f:if>
				</cms:validation.validationResults>
				<cms:validation.validationResults results="{validationException.results}" propertyPath="figure">
					<f:if condition="{validationResults->f:count()}">
						<f:then>
							<div class="form-group has-error">
								<f:for each="{validationResults}" as="validationResult" iteration="iteration">
									<f:if condition="{0:iteration.cycle}=={0:1}">
											<label for="figure">Figure</label>
											<input type="file" accept="image/*" class="form-control" id="figure" name="figure" value="{validationResult.source->f:format.htmlspecialchars()}"/>
									</f:if>
									<label class="validation-property-error" for="figure">{validationResult}</label>
								</f:for>
							</div>
						</f:then>
						<f:else>
							<div class="form-group">
								<label for="figure">Figure</label>
								<input type="file" accept="image/*" class="form-control" id="figure" name="figure" value="{node->cms:node.translate(propertyName:'figure')}"/>
							</div>
						</f:else>
					</f:if>
				</cms:validation.validationResults>
				<cms:validation.validationResults results="{validationException.results}" propertyPath="caption">
					<f:if condition="{validationResults->f:count()}">
						<f:then>
							<div class="form-group has-error">
								<f:for each="{validationResults}" as="validationResult" iteration="iteration">
									<f:if condition="{0:iteration.cycle}=={0:1}">
										<label for="caption">Caption</label>
										<textarea class="form-control" id="caption" name="caption" rows="10"
												  placeholder="Having some caption for this image?">{validationResult.source}</textarea>
									</f:if>
									<label class="validation-property-error" for="caption">{validationResult}</label>
								</f:for>
							</div>
						</f:then>
						<f:else>
							<div class="form-group">
								<label for="caption">Caption</label>
								<textarea class="form-control" id="caption" name="caption" rows="10"
										  placeholder="Having some caption for this image?">{node->cms:node.translate(propertyName:'caption')->f:format.htmlspecialchars()}</textarea>
							</div>
						</f:else>
					</f:if>
				</cms:validation.validationResults>
				<div class="form-group">
					<f:render partial="Forms/Actions" arguments="{node:node}"/>
				</div>
			</fieldset>
		</form>
	</f:alias>
</fluid>